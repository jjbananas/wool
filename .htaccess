<IfModule mod_rewrite.c>
	RewriteEngine On
	#RewriteRule ^(.+)/(\w+)\.(js|css)$ lib/Burn/Burn.php?path=$1&file=$2&ext=$3 [L]
	RewriteRule ^track.gif$ track.php [L]
	
	RewriteCond public/%{REQUEST_FILENAME} -s [OR]
	RewriteCond public/%{REQUEST_FILENAME} -l [OR]
	RewriteCond public/%{REQUEST_FILENAME} -d [OR]
	RewriteCond %{REQUEST_URI} !public
	RewriteCond %{REQUEST_URI} \.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf|txt)$
	RewriteRule ^(.*)$ public/$1 [NC,L]
	
	RewriteCond %{REQUEST_FILENAME} -s [OR]
	RewriteCond %{REQUEST_FILENAME} -l [OR]
	RewriteCond %{REQUEST_FILENAME} -d [OR]
	RewriteCond %{REQUEST_URI} public
	RewriteRule ^(.*)$ - [NC,L]
	RewriteRule ^(.*)$ index.php [NC,L]
</IfModule>

<IfModule mod_deflate.c>
	AddOutputFilterByType DEFLATE text/html text/plain text/xml application/x-javascript text/javascript text/css
</IfModule>

<IfModule mod_expires.c>
	ExpiresActive On
	ExpiresDefault A0
	ExpiresByType image/ico A86400
	ExpiresByType image/gif A86400
	ExpiresByType image/png A86400
	ExpiresByType image/jpeg A86400
	ExpiresByType image/x-icon A86400
	ExpiresByType text/css A86400
	ExpiresByType text/javascript A86400
	ExpiresByType application/x-javascript A86400
	ExpiresByType application/x-shockwave-flash A86400
	ExpiresByType application/pdf A86400
	ExpiresByType video/x-flv A86400
</IfModule>

<IfModule mod_headers.c>
	<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
		Header set Cache-Control "max-age=86400, public, must-revalidate"
	</FilesMatch>
	
	<FilesMatch "\.(html|htm|php|xml|txt)$">
		Header set Cache-Control "no-store, no-cache, must-revalidate"
	</FilesMatch>
</IfModule>
